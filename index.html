<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cuaca</title>
</head>
<body>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>

    Lokasi: <input type="text" id="input-lokasi">
    <button id="tombol-set">SET</button>
    <hr>
    
    Cuaca : <b id="lokasi"></b>
    <hr>
    <div id="tampilan"></div> <script>
        function ambilDataCuaca(kota) {
            const urlapi = `https://api.weatherapi.com/v1/current.json?key=10c3bdf8c14d4a1dac165534250710&q=${kota}&aqi=no`;

            $.ajax({
                url : urlapi,
                method : "GET",
                success : function(data){
                    console.log(data);
                    
                    const v = document.getElementById("tampilan");
                    const i = document.getElementById("lokasi");
                    
                    // Mengambil semua data yang diperlukan
                    let lokasi = data.location.name;
                    let suhu = data.current.temp_c;
                    let suhuFahrenheit = data.current.temp_f;
                    let kelembapan = data.current.humidity;
                    let negara = data.location.country;
                    let provinsi = data.location.region;
                    let longitude = data.location.lon;
                    let latitude = data.location.lat;
                    
                    // Mengisi nama lokasi
                    i.innerText = lokasi;
                    
                    // Membuat satu blok teks HTML untuk ditampilkan di dalam div 'tampilan'
                    let kontenHTML = ""; // Mulai dengan string kosong
                    kontenHTML += `Suhu Celcius: ${suhu} &deg;C`;
                    kontenHTML += `<br>Suhu Fahrenheit: ${suhuFahrenheit} &deg;F`;
                    kontenHTML += `<br>Kelembapan: ${kelembapan} %`;
                    kontenHTML += `<br><br><b>Detail Lokasi</b>`; // Tambah spasi dan judul
                    kontenHTML += `<br>Negara: ${negara}`;
                    kontenHTML += `<br>Provinsi: ${provinsi}`;
                    kontenHTML += `<br>Longitude: ${longitude}`;
                    kontenHTML += `<br>Latitude: ${latitude}`;

                    // Menetapkan seluruh konten ke 'v' dalam satu kali operasi
                    v.innerHTML = kontenHTML;

                },
                error : function(error){
                    console.log(error);
                    alert("Lokasi tidak ditemukan");
                },
            });
        }
        
        $("#tombol-set").on("click", function() {
            const kotaDariInput = $("#input-lokasi").val();
            if (kotaDariInput) {
                ambilDataCuaca(kotaDariInput);
            }
        });

        $("#input-lokasi").on("keypress", function(event) {
            if (event.key === "Enter") {
                // Memicu event klik pada tombol SET
                $("#tombol-set").click();
            }
        });
    </script>
</body>
</html> 